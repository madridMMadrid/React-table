{"ast":null,"code":"import _classCallCheck from \"/Users/dimamadrid/iCloud Drive (\\u0430\\u0440\\u0445\\u0438\\u0432) - 1/Documents/WORK/React-table/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/dimamadrid/iCloud Drive (\\u0430\\u0440\\u0445\\u0438\\u0432) - 1/Documents/WORK/React-table/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/dimamadrid/iCloud Drive (\\u0430\\u0440\\u0445\\u0438\\u0432) - 1/Documents/WORK/React-table/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/dimamadrid/iCloud Drive (\\u0430\\u0440\\u0445\\u0438\\u0432) - 1/Documents/WORK/React-table/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/dimamadrid/iCloud Drive (\\u0430\\u0440\\u0445\\u0438\\u0432) - 1/Documents/WORK/React-table/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/dimamadrid/iCloud Drive (\\u0430\\u0440\\u0445\\u0438\\u0432) - 1/Documents/WORK/React-table/src/App.js\";\nimport React, { Component } from 'react';\nimport Table from './Table/Table';\nimport DetailRowView from './DetailRowView/DetailRowView';\nimport TableSearch from './TableSearch/TableSearch';\nimport TableAdd from './TableAdd/TableAdd';\nimport _ from 'lodash';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      isModeSelected: false,\n      isLoading: false,\n      data: [{\n        \"id\": 531,\n        \"firstName\": \"Андрей\",\n        \"lastName\": \"Баранов\",\n        \"email\": \"andrey@bk.ru\",\n        \"phone\": \"(909)541-2985\",\n        \"address\": {\n          \"streetAddress\": \"7366 Ante Ln\",\n          \"city\": \"Saint Pauls\",\n          \"state\": \"NC\",\n          \"zip\": \"93276\"\n        },\n        \"description\": \"Описание\"\n      }, {\n        \"id\": 7,\n        \"firstName\": \"Гретта\",\n        \"lastName\": \"Гарлкина\",\n        \"email\": \"diana@list.ru\",\n        \"phone\": \"(373)069-8474\",\n        \"address\": {\n          \"streetAddress\": \"3533 Pulvinar Dr\",\n          \"city\": \"Allentown\",\n          \"state\": \"KY\",\n          \"zip\": \"19194\"\n        },\n        \"description\": \"Описание 1\"\n      }, {\n        \"id\": 876,\n        \"firstName\": \"Джеймс\",\n        \"lastName\": \"Гандольфини\",\n        \"email\": \"jemes@list.ru\",\n        \"phone\": \"(455)380-5765\",\n        \"address\": {\n          \"streetAddress\": \"6557 Pretium Ct\",\n          \"city\": \"Berlin\",\n          \"state\": \"LA\",\n          \"zip\": \"94511\"\n        },\n        \"description\": \"Описание 2\"\n      }],\n      search: '',\n      sort: 'asc',\n      // 'desc'\n      sortField: 'id',\n      row: null,\n      currentPage: 0\n    };\n\n    _this.onSort = function (sortField) {\n      var cloneData = _this.state.data.concat();\n\n      var sort = _this.state.sort === 'asc' ? 'desc' : 'asc';\n\n      var data = _.orderBy(cloneData, sortField, sort);\n\n      _this.setState({\n        data: data,\n        sort: sort,\n        sortField: sortField\n      });\n    };\n\n    _this.modeSelectHandler = function (url) {\n      // console.log(url)\n      _this.setState({\n        isModeSelected: true,\n        isLoading: true\n      });\n\n      _this.fetchData(url);\n    };\n\n    _this.onRowSelect = function (row) {\n      return _this.setState({\n        row: row\n      });\n    };\n\n    _this.addTable = function (row) {\n      var oldTable = _this.state.data;\n      console.log('row', row);\n      oldTable.push({\n        \"id\": 11,\n        \"firstName\": row.name,\n        \"lastName\": row.lastName,\n        \"email\": \"andrey@bk.ru\",\n        \"phone\": \"(909)541-2985\",\n        \"address\": {\n          \"streetAddress\": \"7366 Ante Ln\",\n          \"city\": \"Saint Pauls\",\n          \"state\": \"NC\",\n          \"zip\": \"93276\"\n        },\n        \"description\": \"Описание\"\n      });\n\n      _this.setState(oldTable);\n    };\n\n    _this.deleteRow = function (row) {\n      return _this.setState({\n        data: _this.state.data.filter(function (item) {\n          return item.id !== row;\n        })\n      });\n    };\n\n    _this.pageChangeHandler = function (_ref) {\n      var selected = _ref.selected;\n      return _this.setState({\n        currentPage: selected\n      });\n    };\n\n    _this.searchHandler = function (search) {\n      _this.setState({\n        search: search,\n        currentPage: 0\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"getFilteredData\",\n    value: function getFilteredData() {\n      var _this$state = this.state,\n          data = _this$state.data,\n          search = _this$state.search;\n\n      if (!search) {\n        return data;\n      }\n\n      var result = data.filter(function (item) {\n        return item[\"firstName\"].toLowerCase().includes(search.toLowerCase()) || item[\"lastName\"].toLowerCase().includes(search.toLowerCase()) || item[\"email\"].toLowerCase().includes(search.toLowerCase());\n      });\n\n      if (!result.length) {\n        result = this.state.data;\n      }\n\n      return result;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var filteredData = this.getFilteredData();\n\n      var displayData = _.chunk(filteredData, this.state.data.length)[this.state.currentPage];\n\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(TableSearch, {\n        onSearch: this.searchHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }), React.createElement(TableAdd, {\n        addTable: this.addTable,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }), React.createElement(Table, {\n        data: displayData,\n        onSort: this.onSort,\n        sort: this.state.sort,\n        sortField: this.state.sortField,\n        onRowSelect: this.onRowSelect,\n        deleteRow: this.deleteRow,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      })), this.state.row ? React.createElement(DetailRowView, {\n        person: this.state.row,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }) : null);\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/dimamadrid/iCloud Drive (архив) - 1/Documents/WORK/React-table/src/App.js"],"names":["React","Component","Table","DetailRowView","TableSearch","TableAdd","_","App","state","isModeSelected","isLoading","data","search","sort","sortField","row","currentPage","onSort","cloneData","concat","orderBy","setState","modeSelectHandler","url","fetchData","onRowSelect","addTable","oldTable","console","log","push","name","lastName","deleteRow","filter","item","id","pageChangeHandler","selected","searchHandler","result","toLowerCase","includes","length","filteredData","getFilteredData","displayData","chunk"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Table from './Table/Table';\nimport DetailRowView from './DetailRowView/DetailRowView';\nimport TableSearch from './TableSearch/TableSearch';\nimport TableAdd from './TableAdd/TableAdd';\nimport _ from 'lodash';\n\n\nclass App extends Component {\n\n  \n  state = {\n    isModeSelected: false,\n    isLoading: false,\n    data: [\n      {\n        \"id\": 531,\n        \"firstName\": \"Андрей\",\n        \"lastName\": \"Баранов\",\n        \"email\": \"andrey@bk.ru\",\n        \"phone\": \"(909)541-2985\",\n        \"address\": {\n          \"streetAddress\": \"7366 Ante Ln\",\n          \"city\": \"Saint Pauls\",\n          \"state\": \"NC\",\n          \"zip\": \"93276\"\n        },\n        \"description\": \"Описание\"\n      },\n      {\n        \"id\": 7,\n        \"firstName\": \"Гретта\",\n        \"lastName\": \"Гарлкина\",\n        \"email\": \"diana@list.ru\",\n        \"phone\": \"(373)069-8474\",\n        \"address\": {\n          \"streetAddress\": \"3533 Pulvinar Dr\",\n          \"city\": \"Allentown\",\n          \"state\": \"KY\",\n          \"zip\": \"19194\"\n        },\n        \"description\": \"Описание 1\"\n      },\n      {\n        \"id\": 876,\n        \"firstName\": \"Джеймс\",\n        \"lastName\": \"Гандольфини\",\n        \"email\": \"jemes@list.ru\",\n        \"phone\": \"(455)380-5765\",\n        \"address\": {\n          \"streetAddress\": \"6557 Pretium Ct\",\n          \"city\": \"Berlin\",\n          \"state\": \"LA\",\n          \"zip\": \"94511\"\n        },\n        \"description\": \"Описание 2\"\n      },\n    ],\n    search: '',\n    sort: 'asc',  // 'desc'\n    sortField: 'id',\n    row: null,\n    currentPage: 0,\n  }\n  onSort = sortField => {\n    const cloneData = this.state.data.concat();\n    const sort = this.state.sort === 'asc' ? 'desc' : 'asc';\n    const data = _.orderBy(cloneData, sortField, sort);\n    this.setState({ data, sort, sortField })\n  }\n\n  modeSelectHandler = url => {\n    // console.log(url)\n    this.setState({\n      isModeSelected: true,\n      isLoading: true,\n    })\n    this.fetchData(url)\n  }\n\n\n  onRowSelect = row => (\n    this.setState({ row })\n  )\n  addTable = row => {\n    let oldTable = this.state.data;\n    console.log('row', row)\n    oldTable.push({\n      \"id\": 11,\n      \"firstName\": row.name,\n      \"lastName\": row.lastName,\n      \"email\": \"andrey@bk.ru\",\n      \"phone\": \"(909)541-2985\",\n      \"address\": {\n        \"streetAddress\": \"7366 Ante Ln\",\n        \"city\": \"Saint Pauls\",\n        \"state\": \"NC\",\n        \"zip\": \"93276\"\n      },\n      \"description\": \"Описание\"\n    });\n\n    this.setState(oldTable);\n  }\n  deleteRow = row => (\n    this.setState({data: this.state.data.filter(item => item.id !== row)})\n  )\n\n  pageChangeHandler = ({ selected }) => (\n    this.setState({ currentPage: selected })\n  )\n\n  searchHandler = search => {\n    this.setState({ search, currentPage: 0 })\n  }\n\n  getFilteredData() {\n    const { data, search } = this.state\n\n    if (!search) {\n      return data\n    }\n    var result = data.filter(item => {\n      return (\n        item[\"firstName\"].toLowerCase().includes(search.toLowerCase()) ||\n        item[\"lastName\"].toLowerCase().includes(search.toLowerCase()) ||\n        item[\"email\"].toLowerCase().includes(search.toLowerCase())\n      );\n    });\n    if (!result.length) {\n      result = this.state.data\n    }\n    return result\n  }\n\n  render() {\n\n    const filteredData = this.getFilteredData();\n    const displayData = _.chunk(filteredData, this.state.data.length)[this.state.currentPage]\n    return (\n      <div className=\"container\">\n        {\n            <React.Fragment>\n              <TableSearch onSearch={this.searchHandler} />\n              <TableAdd addTable={this.addTable} />\n              <Table\n                data={displayData}\n                onSort={this.onSort}\n                sort={this.state.sort}\n                sortField={this.state.sortField}\n                onRowSelect={this.onRowSelect}\n                deleteRow={this.deleteRow}\n              />\n            </React.Fragment>\n\n        }\n        {\n          this.state.row ? <DetailRowView person={this.state.row} /> : null\n        }\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}